{
    "dataset": "Recommendations",
    "provider": "Microsoft",
    "query": "resources | where type =~ 'microsoft.network/loadbalancers' and array_length(properties.backendAddressPools) == 0 and sku.name!='Basic' | extend SKUName=tostring(sku.name) | extend SKUTier=tostring(sku.tier), Location=location | extend backendAddressPools = properties.backendAddressPools | extend id,name, SKUName,SKUTier,backendAddressPools, location,resourceGroup, subscriptionId, type| project     x_RecommendationId=strcat(tolower(id),'-idle'),     x_ResourceGroupName=tolower(resourceGroup),     SubAccountId=subscriptionId,     x_RecommendationCategory='Cost',     x_RecommendationDescription='Load balancer without a backend pool',     ResourceId = tolower(id),     ResourceName=tolower(name),     x_RecommendationDetails= strcat('{\"SKUName\": \"', SKUName, '\", \"SKUTier\": \"', SKUTier, '\", \"Location\": \"', Location, '\", \"x_RecommendationProvider\": \"FinOps hubs\", \"x_RecommendationSolution\": \"Review and remove this resource if not needed\", \"x_RecommendationTypeId\": \"ab703887-fa23-4915-abdc-3defbea89f7a\", \"x_ResourceType\": \"', type, '\"}'),     x_RecommendationDate = now() | join kind=leftouter ( resourcecontainers | where type == 'microsoft.resources/subscriptions' | project SubAccountName=name, SubAccountId=subscriptionId ) on SubAccountId | project-away SubAccountId1",
    "queryEngine": "ResourceGraph",
    "scope": "Tenant",
    "source": "FinOps hubs",
    "type": "Microsoft-BackendlessLoadBalancers",
    "version": "1.0"
}
