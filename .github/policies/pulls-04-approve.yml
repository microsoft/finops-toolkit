id: pulls-04-approve
name: GitOps.PullRequestIssueManagement
description: Handles when PR is approved
owner:
resource: repository
disabled: false
where:

# spell-checker:disable
configuration:
  resourceManagementConfiguration:
    eventResponderTasks:
      - description: >-
          When PR is approved:
          - Assign to author
          - Label with `Status: ‚ñ∂Ô∏è Ready`
          - Remove `Needs: Attention üëã` label
        if:
          - payloadType: Pull_Request_Review
          - isAction:
              action: Submitted
          - isReviewState:
              reviewState: Approved
          - isActivitySender:
              issueAuthor: False
          - not:
              targetsBranch:
                branch: main
        then:
          - addLabel:
              label: 'Status: ‚ñ∂Ô∏è Ready'
          - removeLabel:
              label: 'Needs: Attention üëã'
          - assignTo:
              author: True
onFailure:
onSuccess:
